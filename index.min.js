let Z="1.0.0",Q=()=>!1,V=Object.keys,ee=Object.values,H=Object.assign,w=Array.isArray,te=Object.freeze([]),E=Object.freeze({}),R=e=>"string"==typeof e,y=e=>"function"==typeof e,ne=(e,t)=>e===t,F=e=>null!=e&&"object"==typeof e&&!w(e),J=e=>{let t;for(t of e)t()},I=(e,t,l,r)=>Object.defineProperty(e,t,{enumerable:!1,...r&&r,...!r&&{value:l,writable:!0}}),se=Promise.resolve(),D={},B={},_={},L={},p=!1,le=3,A,re=A=e=>{B[e.$]||(B[e.$]=!0,D[e.$]=e,p||(p=!0,se.then(ie)))},oe=e=>{L[e.$]||(L[e.$]=!0,J(ee(e)))},ie=()=>{let e,t,l,r=le;for(;r-- >0;)for(e in D){for(t in l=D[e])_[t]||(_[t]=!0,l[t]());delete D[e]}B={},_={},p=!1},Ae=e=>{A=oe,e(),L={},A=re},U=[],N=!1,C={},ce=0,z=0,Fe=(e,t=ne)=>{let l=I({},"$",ce++);return t=t||falsy,[()=>(N&&(C[l.$]=l),e),r=>{let n=y(r)?r(e):r;t(e,n)||(A(l),e=n)}]},Pe=e=>{U.push(e)},Te=(e,t)=>{let l=t;return()=>l=e(l)},b=(e,t,l)=>{let r=[];N=!0;let n=(l||t)();if(N=!1,V(C).length>0){let o;for(o in C)C[o][z]=t,r.push([C[o],z++]);C={},e.push(()=>{let e;for(e of r)delete e[0][e[1]]})}return n},xe=e=>{let t=N;N=!1;let l=e();return N=t,l},je=()=>{let e;return t=>void 0===t?e:e=t},fe=e=>"svg"!==e?document.createElement(e):document.createElementNS("http://www.w3.org/2000/svg",e),K=(e,t,l)=>{if(t in e)return e[t]=l;e.setAttribute(t,`${l}`)},ue=(e,t,l)=>(e.addEventListener(t,l),()=>e.removeEventListener(t,l)),P=(e="")=>document.createTextNode(e),O=(e,t)=>{J(t[1]);let l;for(l of t[0]){if(l.$d){l.$d();continue}e.removeChild(l)}},k=(e,t,l)=>{let r,n=0;for(l=l[0];r=l[n++];)r.$u?t=r.$u(t):(e.insertBefore(r,t.nextSibling),t=r);return t},de=(e,t,l)=>(F(t)?"if"in t&&I(t,"if",t.if):(null==l&&(l=t),t=E),{type:e,props:t,children:l}),ae=(e,t,l,r)=>{var n;let o=[],i;for(i in l)"bind"==i?he(t,l.key,r):"ref"==i?null==(n=l[i])||n.call(l,t):"class"==i?$e(t,l.class,r):"style"==i?ye(t,l.style,r):i.startsWith("on:")?r.push(ue(t,i.slice(3),l[i])):"use"==i?o.push(w(l[i])?l[i]:[l[i]]):y(l[i])?b(r,()=>K(t,i,l[i])):K(t,i,l[i]);for(i of(e(t),o)){let s=i[0](t,(i[1]=y(i[1])?i[1]:falsy)(),...i[2]);void 0!==s.destroy&&r.push(s.destroy),void 0!==s.update&&b(r,()=>s.update(i[1]()),i[1])}},he=(e,t,l)=>{let r=y(t)?t:()=>t,n=E,o=(t=r())=>{let l;if(!F(t))throw Error("Only 'object' can be bind with the elements.");for(l in t)K(e,l,t[l]),delete n[l];for(l in n)e.removeAttribute(l);n=t};o(b(l,o))},$e=(e,t,l)=>{b(l,()=>{let l=y(t)?t():t,r=w(l)?l:[];if(F(l)){let n;for(n in l)r.push(n)}e.setAttribute("class",r.join(" "))})},ye=(e,t,l)=>{let r=E,n=y(t)?t:()=>t,o=(t=n())=>{if(R(t)){e.setAttribute("style",t);return}R(r)&&(r=E);let l,o,i=t=>{for(l in t)delete r[l],o=isNaN(t[l])?t[l]:`${t[l]}px`,"-"!=l[0]?e.style[l]=o:e.style.setProperty(l,o)};if(w(t))for(l of t)i(l);else i(t);for(l in r)e.style[l]="";r=t};o(b(l,o,n))},ge=(e,t)=>{let l=P(),r;return b(t,()=>{l.nodeValue!=(r=e())&&(l.data=r)}),l},be=(e,t,l)=>{let r=P();e.appendChild(r);let n=t.children,o=[[],[]],i=[],s=-1,a;(a=()=>{let t=-1,l=0,f,u;for(;l<n.length;){if(f=n[l].props.if||truthy,u=i.length>l?f():b(i,a,f),i.length==l&&i.push(truthy),u){t=l;break}l++}for(l=i.length;l-- >1&&t<l;)i.pop()();if(t!=s&&(s=t,O(e,o),o[0].length=o[1].length=0,-1!=t)){if(S(e,n[t],o[1],e=>{o[0].push(e)}),0==o[0].length)throw Error("Component <p:case> requires at least one child node.");k(e,r,o)}})(),l({$l(){let e=o[0].at(-1);return e?e.$l?e.$l():e:r},$d(){e.removeChild(r),O(e,o)},$u:t=>(e.insertBefore(r,t.nextSibling),k(e,r,o))})},we=(e,t,l)=>{var r,n;let o=P();e.appendChild(o);let i=[],s=t.children,a=(null==(r=t.props)?void 0:r.key)||((e,t)=>t),f=(null==(n=t.props)?void 0:n.list)||(()=>te),u=[],d=(t=f())=>{if(!w(t))throw Error("Component <p:each> requires list to be an array.");u=Ee(f,e,o,u,t,a,s)};d(b(i,d,f)),l({$l(){let e=u.at(-1);return e?(e=e[0].at(-1)).$l?e.$l():e:o},$d(){e.removeChild(o),i[0]&&i[0]();let t;for(t of u)O(e,t)},$u(t){e.insertBefore(o,t.nextSibling);let l;for(l of u)t=k(e,o,l);return t}})},Ee=(e,t,l,r,n,o,i)=>{let s={},a={},f=[],u,d,h=0,$=0,c=0,g=0,m,x;for(let j of r){if(s[j[2]])throw Error("Duplicate keys found.");s[j[2]]=j}for(let T in n)d=o(n[T],T),(u=f[T]=s[d]||[null,[],d,T])[4]=T-u[3],u[3]=T,a[d]=!0;let Y=r=>{if(null==r[0]&&(r[0]=[],S(t,i(()=>e()[r[3]],()=>r[3]),r[1],e=>r[0].push(e)),0==r[0].length))throw Error("Component <p:each> requires at least one children.");k(t,l,r),(l=r.at(-1)).$l&&(l=l.$l())};for(;(m=r[h])&&(x=f[$]);)m==x?((l=m[0].at(-1)).$l&&(l=l.$l()),c=g=0,$++):m[2]in a?null==x[0]?(Y(x),c++,$++):(x[4]<0?x[4]>=g:x[4]>=c)&&(Y(x),$++):(O(t,m),g++),h++;for(;m=r[h++];)O(t,m);for(;x=f[$++];)(null==x[0]||(x[4]<0?x[4]>=g:x[4]>=c))&&Y(x);return f},me=(e,t,l,r)=>{if(!(t.props.target instanceof Node))throw Error("Target is not found in <p:portal>");let n=[[],[]],o=t.props.target;S(o,t.children,n[1],e=>{e.$l||o.appendChild(e),n[0].push(e)}),r.push(()=>O(e,n))},Ce=0,X=(e,t,l)=>{let r={},n;for(n in t)"bind"==n?Oe(e,t,t.bind,l):"use"==n?r=t[n]:n.startsWith("on:")?e["on"+n.slice(3)]=t[n]:Ne(e,n,t[n]);return r},Ne=(e,t,l)=>{delete e[t],I(e,t,null,{get:()=>y(l)?l():l})},Oe=(e,t,l,r)=>{let n=I({},"$",`.${Ce++}.`),o=E,i=y(l)?l:()=>l,s=(l=i())=>{if(F(l))throw Error("Only 'object' can be bind with the components.");let r;for(r in l){if(r in o){l[r]!==o[r]&&(e[r]=l[r],A(n));continue}I(e,r,null,{get:()=>(N&&(C[n.$]=n),l[r])}),delete o[r]}for(r in o)delete e[r],t[r]&&(e[r]=t[r]);o=l};s(b(r,s,i))},Se=(e,t,l,r)=>{let n=[[],[]],o;if(y(t.children)){let i={},s=X(i,t.props||E,n[1]);o=t.children(i,{use:s})}else o=t.children;S(e,o,r,l)},v={each:we,case:be,portal:me,slot:Se,comment(e,t,l){l(document.createComment(`${t.children}`))}},S=(e,t,l,r)=>{if(R(t))r(P(t));else if(y(t))r(ge(t,l));else if(w(t)){let n;for(n of t)S(e,n,l,r)}else if(y(t.type))M(e,t,r);else if(t.type.startsWith("p:")){let o=t.type.slice(2);if(o in v)return v[o](e,t,r,l);t.type=Ie(o),M(e,t,r)}else{let i=fe(t.type);ae(r,i,t.props||E,l),t.children&&S(i,t.children,l,e=>{e.$d?l.push(e.$d):i.appendChild(e)})}},M=(e,t,l)=>{let r=P();e.appendChild(r);let n={},o=[[],[]],i=X(n,t.props||E,o[1]),s=[],a=t.type(n,{slots:t.children,use:i});if(null==a||w(a)&&0==a.length)throw Error("Component must return at least one node.");if(S(e,a,o[1],e=>{o[0].push(e)}),0==o[0].length)throw Error("Component requires at least one child node.");for(let f of(k(e,r,o),U)){let u={value:null};b(o[1],()=>{var e;null==(e=u.value)||e.call(u),u.value=f()}),s.push(u)}U.length=0,l({$l(){let e=o[0].at(-1);return e.$l?e.$l():e},$d(){var t;for(let l of s)null==(t=l.value)||t.call(l);O(e,o),e.removeChild(r)},$u:t=>(e.insertBefore(r,t.nextSibling),k(e,r,o))})},q={},G={},W={},ke={allowComment:!1,isCustomTag:Q},He=(e,t,...l)=>[(R(e)?W[e]:e)||truthy,t,l],De=e=>q[e],Ie=e=>G[e]||(()=>{throw Error(`Component '<p:${e}>' is not registered.`)}),Re=(e,t,l)=>{if(!(t instanceof Node))throw Error("Target is not found.");let r=E;if(l&&(F(l.initialProps)&&(r=l.initialProps),y(l.errorHandler)&&l.errorHandler,H(q,l.global),H(W,l.directive),H(ke,l.config),H(G,l.component),w(l.plugins))){let n={component(e,t){G[e]=t},directive(e,t){W[e]=t},global(e,t){q[e]=t},version:Z};for(let o of l.plugins)y(o)?o(n):w(o)&&o[0](n,...o[1])}let i=Q;return M(t,de(e,r),e=>i=e.$d),i};export{Re as createApp,Pe as createEffect,Te as createMemo,je as createRef,Fe as createSignal,De as global,de as h,Ae as unbatch,xe as untrack,He as use,Z as version};
